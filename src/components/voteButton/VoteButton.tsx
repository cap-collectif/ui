import * as React from 'react'

import { CapUIFontWeight, CapUILineHeight } from '../../styles'
import { Box } from '../box'
import { ButtonProps } from '../button'
import { CapUIIcon, CapUIIconSize, Icon } from '../icon'
import { styles } from './VoteButton.style'

export interface VoteButtonProps
  extends Omit<ButtonProps, 'variant' | 'variantColor' | 'variantSize'> {
  threshold?: number
  active?: boolean
}

const VoteButton: React.FC<VoteButtonProps> = React.forwardRef<
  HTMLButtonElement | HTMLAnchorElement,
  ButtonProps
>(
  (
    { threshold, as = 'button', children, disabled, active = false, ...rest },
    ref,
  ) => {
    if (!!threshold && (threshold < 0 || threshold > 100)) {
      console.error('threshold must be between 0 and a 100')
    }
    return (
      <Box
        ref={ref}
        sx={styles(active)}
        as="button"
        type="button"
        display="inline-flex"
        alignItems="center"
        fontFamily="body"
        fontSize={3}
        fontWeight={CapUIFontWeight.Semibold}
        lineHeight={CapUILineHeight.Base}
        disabled={disabled}
        {...rest}
      >
        {!!threshold || threshold === 0 ? (
          <Box
            as="svg"
            size={10}
            width="32px"
            height="32px"
            padding="4px"
            viewBox="0 0 32 28"
            fillRule="nonzero"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <mask id="path-1-inside-1_9433_316196" fill="white">
              <path d="M31.1571 12.7459C31.1571 12.3197 31.0732 11.8977 30.9101 11.5039C30.747 11.1101 30.5079 10.7523 30.2065 10.451C29.9051 10.1496 29.5474 9.91053 29.1536 9.74743C28.7598 9.58432 28.3378 9.50038 27.9116 9.50038H19.7186C19.6673 9.50027 19.6168 9.48803 19.5712 9.46465C19.5256 9.44128 19.4862 9.40744 19.4562 9.3659C19.4262 9.32437 19.4064 9.27631 19.3985 9.22567C19.3907 9.17503 19.3949 9.12325 19.4109 9.07456C20.1275 7.25812 20.3601 5.2867 20.0859 3.35334C19.3226 0.627093 17.705 -0.151835 16.4406 0.0234239C15.8187 0.128915 15.2564 0.457202 14.8589 0.946959C14.4613 1.43672 14.2557 2.05445 14.2803 2.68476C14.2803 6.24965 11.5164 10.1443 9.04335 11.8514C8.95677 11.9112 8.886 11.9911 8.83716 12.0843C8.78831 12.1774 8.76284 12.2811 8.76294 12.3863V25.519C8.76291 25.6698 8.81536 25.8159 8.91131 25.9322C9.00725 26.0485 9.14069 26.1278 9.28872 26.1564C9.75218 26.2447 10.1728 26.3317 10.5701 26.4161C12.317 26.8316 14.1074 27.0369 15.9031 27.0275H24.3415C26.8834 27.0275 27.2625 25.5995 27.2625 24.7557C27.263 24.3078 27.1604 23.8658 26.9626 23.4639C27.6475 23.1158 28.1678 22.5119 28.4108 21.783C28.6537 21.0541 28.5999 20.2588 28.2608 19.5693C28.6086 19.3926 28.9175 19.148 29.1692 18.85C29.4209 18.552 29.6104 18.2065 29.7264 17.8341C29.8425 17.4616 29.8827 17.0697 29.8448 16.6814C29.8069 16.2931 29.6917 15.9164 29.5058 15.5734C30.007 15.2908 30.424 14.88 30.7142 14.3832C31.0043 13.8863 31.1572 13.3213 31.1571 12.7459Z" />
            </mask>
            <defs>
              <clipPath id="cut-off-bottom">
                <rect
                  x="0"
                  y={((100 - threshold) * 28) / 100}
                  width="48"
                  height="48"
                />
              </clipPath>
            </defs>
            <path
              d="M31.1571 12.7459C31.1571 12.3197 31.0732 11.8977 30.9101 11.5039C30.747 11.1101 30.5079 10.7523 30.2065 10.451C29.9051 10.1496 29.5474 9.91053 29.1536 9.74743C28.7598 9.58432 28.3378 9.50038 27.9116 9.50038H19.7186C19.6673 9.50027 19.6168 9.48803 19.5712 9.46465C19.5256 9.44128 19.4862 9.40744 19.4562 9.3659C19.4262 9.32437 19.4064 9.27631 19.3985 9.22567C19.3907 9.17503 19.3949 9.12325 19.4109 9.07456C20.1275 7.25812 20.3601 5.2867 20.0859 3.35334C19.3226 0.627093 17.705 -0.151835 16.4406 0.0234239C15.8187 0.128915 15.2564 0.457202 14.8589 0.946959C14.4613 1.43672 14.2557 2.05445 14.2803 2.68476C14.2803 6.24965 11.5164 10.1443 9.04335 11.8514C8.95677 11.9112 8.886 11.9911 8.83716 12.0843C8.78831 12.1774 8.76284 12.2811 8.76294 12.3863V25.519C8.76291 25.6698 8.81536 25.8159 8.91131 25.9322C9.00725 26.0485 9.14069 26.1278 9.28872 26.1564C9.75218 26.2447 10.1728 26.3317 10.5701 26.4161C12.317 26.8316 14.1074 27.0369 15.9031 27.0275H24.3415C26.8834 27.0275 27.2625 25.5995 27.2625 24.7557C27.263 24.3078 27.1604 23.8658 26.9626 23.4639C27.6475 23.1158 28.1678 22.5119 28.4108 21.783C28.6537 21.0541 28.5999 20.2588 28.2608 19.5693C28.6086 19.3926 28.9175 19.148 29.1692 18.85C29.4209 18.552 29.6104 18.2065 29.7264 17.8341C29.8425 17.4616 29.8827 17.0697 29.8448 16.6814C29.8069 16.2931 29.6917 15.9164 29.5058 15.5734C30.007 15.2908 30.424 14.88 30.7142 14.3832C31.0043 13.8863 31.1572 13.3213 31.1571 12.7459Z"
              fill="currentColor"
              clipPath="url(#cut-off-bottom)"
            />
            <path
              d="M19.7186 9.50038L19.715 11.2004H19.7186V9.50038ZM19.4109 9.07456L17.8295 8.45065L17.8113 8.49691L17.7957 8.54416L19.4109 9.07456ZM20.0859 3.35334L21.7691 3.11462L21.7533 3.00327L21.723 2.89497L20.0859 3.35334ZM16.4406 0.0234239L16.2072 -1.66048L16.1817 -1.65694L16.1563 -1.65263L16.4406 0.0234239ZM14.2803 2.68476H15.9803V2.65153L15.979 2.61832L14.2803 2.68476ZM9.04335 11.8514L10.009 13.2506L10.0091 13.2505L9.04335 11.8514ZM8.76294 12.3863H10.4629L10.4629 12.3847L8.76294 12.3863ZM8.76294 25.519L10.4629 25.5194V25.519H8.76294ZM9.28872 26.1564L8.96571 27.8255L8.97063 27.8264L9.28872 26.1564ZM10.5701 26.4161L10.9634 24.7622L10.9434 24.7575L10.9233 24.7532L10.5701 26.4161ZM15.9031 27.0275L15.9031 25.3275L15.8942 25.3276L15.9031 27.0275ZM27.2625 24.7557L25.5625 24.7537V24.7557H27.2625ZM26.9626 23.4639L26.1923 21.9485L24.6961 22.709L25.4373 24.2147L26.9626 23.4639ZM28.2608 19.5693L27.4907 18.0537L25.9948 18.8138L26.7353 20.3195L28.2608 19.5693ZM29.5058 15.5734L28.6707 14.0926L27.2147 14.9137L28.0112 16.3834L29.5058 15.5734ZM31.1571 12.7459H29.4571V12.7462L31.1571 12.7459ZM32.8571 12.7459C32.8571 12.0964 32.7292 11.4534 32.4806 10.8533L29.3395 12.1545C29.4171 12.342 29.4571 12.5429 29.4571 12.7459H32.8571ZM32.4806 10.8533C32.2321 10.2533 31.8678 9.70813 31.4086 9.24889L29.0044 11.6531C29.1479 11.7966 29.2618 11.9669 29.3395 12.1545L32.4806 10.8533ZM31.4086 9.24889C30.9494 8.78965 30.4042 8.42537 29.8041 8.17683L28.503 11.318C28.6905 11.3957 28.8609 11.5095 29.0044 11.6531L31.4086 9.24889ZM29.8041 8.17683C29.2041 7.9283 28.561 7.80038 27.9116 7.80038V11.2004C28.1145 11.2004 28.3155 11.2404 28.503 11.318L29.8041 8.17683ZM27.9116 7.80038H19.7186V11.2004H27.9116V7.80038ZM19.7221 7.80038C19.9393 7.80083 20.1533 7.85272 20.3465 7.95176L18.7959 10.9776C19.0803 11.1233 19.3953 11.1997 19.715 11.2004L19.7221 7.80038ZM20.3465 7.95176C20.5398 8.05081 20.7069 8.19423 20.8341 8.37026L18.0782 10.3615C18.2655 10.6207 18.5114 10.8318 18.7959 10.9776L20.3465 7.95176ZM20.8341 8.37026C20.9613 8.54629 21.045 8.74995 21.0784 8.96456L17.7187 9.48678C17.7678 9.80267 17.891 10.1024 18.0782 10.3615L20.8341 8.37026ZM21.0784 8.96456C21.1117 9.17916 21.0938 9.39862 21.026 9.60497L17.7957 8.54416C17.696 8.84789 17.6696 9.17091 17.7187 9.48678L21.0784 8.96456ZM20.9922 9.69847C21.817 7.60816 22.0846 5.33948 21.7691 3.11462L18.4028 3.59205C18.6356 5.23391 18.4381 6.90809 17.8295 8.45065L20.9922 9.69847ZM21.723 2.89497C21.2704 1.27862 20.511 0.051706 19.4973 -0.739675C18.4729 -1.53947 17.2897 -1.81051 16.2072 -1.66048L16.674 1.70733C16.8559 1.6821 17.1137 1.7129 17.405 1.94031C17.7071 2.17614 18.1381 2.70181 18.4489 3.81171L21.723 2.89497ZM16.1563 -1.65263C15.1272 -1.47807 14.1968 -0.934842 13.539 -0.124418L16.1788 2.01834C16.316 1.84925 16.5102 1.7359 16.7249 1.69948L16.1563 -1.65263ZM13.539 -0.124418C12.8811 0.686008 12.5408 1.7082 12.5816 2.7512L15.979 2.61832C15.9705 2.4007 16.0415 2.18743 16.1788 2.01834L13.539 -0.124418ZM12.5803 2.68476C12.5803 4.05236 12.0386 5.60913 11.1396 7.07676C10.2442 8.53846 9.09089 9.75293 8.07761 10.4524L10.0091 13.2505C11.4689 12.2428 12.9341 10.6564 14.0389 8.85275C15.1401 7.05505 15.9803 4.88205 15.9803 2.68476H12.5803ZM8.07775 10.4523C7.76441 10.6685 7.50831 10.9577 7.33153 11.2949L10.3428 12.8736C10.2637 13.0245 10.1491 13.1538 10.009 13.2506L8.07775 10.4523ZM7.33153 11.2949C7.15474 11.6321 7.06257 12.0072 7.06294 12.388L10.4629 12.3847C10.4631 12.555 10.4219 12.7228 10.3428 12.8736L7.33153 11.2949ZM7.06294 12.3863V25.519H10.4629V12.3863H7.06294ZM7.06294 25.5187C7.06282 26.0643 7.25266 26.593 7.59987 27.0139L10.2227 24.8505C10.3781 25.0388 10.463 25.2753 10.4629 25.5194L7.06294 25.5187ZM7.59987 27.0139C7.94708 27.4349 8.43 27.7218 8.96572 27.8255L9.61172 24.4874C9.85137 24.5338 10.0674 24.6621 10.2227 24.8505L7.59987 27.0139ZM8.97063 27.8264C9.41805 27.9116 9.82601 27.996 10.2168 28.079L10.9233 24.7532C10.5196 24.6674 10.0863 24.5778 9.60681 24.4865L8.97063 27.8264ZM10.1767 28.0699C12.0554 28.5168 13.9808 28.7376 15.912 28.7275L15.8942 25.3276C14.234 25.3362 12.5787 25.1464 10.9634 24.7622L10.1767 28.0699ZM15.9031 28.7275H24.3415V25.3275H15.9031V28.7275ZM24.3415 28.7275C25.9292 28.7275 27.1918 28.2725 28.0239 27.3396C28.8227 26.444 28.9625 25.3966 28.9625 24.7557H25.5625C25.5625 24.9586 25.5127 25.0471 25.4865 25.0765C25.4757 25.0886 25.4263 25.1422 25.2744 25.1991C25.1127 25.2596 24.822 25.3275 24.3415 25.3275V28.7275ZM28.9625 24.7577C28.9633 24.0488 28.8009 23.3492 28.4878 22.7132L25.4373 24.2147C25.5199 24.3824 25.5627 24.5668 25.5625 24.7537L28.9625 24.7577ZM27.7329 24.9794C28.8163 24.4287 29.6392 23.4735 30.0235 22.3206L26.798 21.2454C26.6964 21.5503 26.4788 21.8029 26.1923 21.9485L27.7329 24.9794ZM30.0235 22.3206C30.4078 21.1676 30.3226 19.9097 29.7863 18.8191L26.7353 20.3195C26.8771 20.6079 26.8996 20.9405 26.798 21.2454L30.0235 22.3206ZM29.0308 21.0849C29.581 20.8054 30.0697 20.4184 30.4679 19.9469L27.8705 17.753C27.7652 17.8776 27.6361 17.9799 27.4907 18.0537L29.0308 21.0849ZM30.4679 19.9469C30.8662 19.4754 31.1659 18.929 31.3495 18.3397L28.1034 17.3284C28.0549 17.4841 27.9757 17.6285 27.8705 17.753L30.4679 19.9469ZM31.3495 18.3397C31.5331 17.7505 31.5968 17.1305 31.5368 16.5163L28.1529 16.8466C28.1687 17.0089 28.1519 17.1727 28.1034 17.3284L31.3495 18.3397ZM31.5368 16.5163C31.4769 15.902 31.2945 15.306 31.0004 14.7634L28.0112 16.3834C28.0889 16.5268 28.137 16.6843 28.1529 16.8466L31.5368 16.5163ZM30.3408 17.0542C31.1045 16.6235 31.74 15.9976 32.1821 15.2405L29.2462 13.5258C29.108 13.7624 28.9094 13.958 28.6707 14.0926L30.3408 17.0542ZM32.1821 15.2405C32.6243 14.4834 32.8572 13.6224 32.8571 12.7456L29.4571 12.7462C29.4571 13.0202 29.3843 13.2892 29.2462 13.5258L32.1821 15.2405Z"
              fill="currentColor"
              mask="url(#path-1-inside-1_9433_316196)"
              clipRule="evenodd"
            />
            <path
              d="M5.83434 12.1046C5.91839 12.1886 5.96562 12.3026 5.96562 12.4215V26.7018C5.96562 26.8207 5.9184 26.9347 5.83434 27.0188C5.75028 27.1028 5.63627 27.1501 5.5174 27.1501H1.29821C1.17934 27.1501 1.06534 27.1028 0.981278 27.0188C0.897222 26.9347 0.85 26.8207 0.85 26.7018V12.4215C0.85 12.3026 0.897223 12.1886 0.981278 12.1046C1.06533 12.0205 1.17934 11.9733 1.29821 11.9733H5.5174C5.63628 11.9733 5.75028 12.0205 5.83434 12.1046Z"
              fill="currentColor"
              stroke="currentColor"
              strokeWidth="1.7"
              clipPath="url(#cut-off-bottom)"
            />
            <path
              d="M5.83434 12.1046C5.91839 12.1886 5.96562 12.3026 5.96562 12.4215V26.7018C5.96562 26.8207 5.9184 26.9347 5.83434 27.0188C5.75028 27.1028 5.63627 27.1501 5.5174 27.1501H1.29821C1.17934 27.1501 1.06534 27.1028 0.981278 27.0188C0.897222 26.9347 0.85 26.8207 0.85 26.7018V12.4215C0.85 12.3026 0.897223 12.1886 0.981278 12.1046C1.06533 12.0205 1.17934 11.9733 1.29821 11.9733H5.5174C5.63628 11.9733 5.75028 12.0205 5.83434 12.1046Z"
              fill="none"
              stroke="currentColor"
              strokeWidth="1.7"
            />
          </Box>
        ) : (
          <Icon
            color="inherit"
            name={CapUIIcon.ThumbUpO}
            size={CapUIIconSize.Lg}
            mr={1}
          />
        )}

        {children}
      </Box>
    )
  },
)

export default VoteButton
